(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{52:function(e,t,s){},57:function(e,t,s){},58:function(e,t,s){},59:function(e,t,s){},60:function(e,t,s){},79:function(e,t,s){},80:function(e,t,s){},81:function(e,t,s){},82:function(e,t,s){},83:function(e,t,s){},85:function(e,t,s){"use strict";s.r(t);var c=s(1),n=s.n(c),a=s(33),r=s.n(a),i=s(36),l=s.n(i),o=s(39),j=s.n(o),u=s(40),b=s.n(u),p=s(8),O=s(4),d=s(23),h=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":case"UPDATE_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"UPDATE_START":return Object(d.a)(Object(d.a)({},e),{},{isFetching:!0});case"UPDATE_FAILURE":return{user:e.user,isFetching:!1,error:!0};case"LOGOUT":return{user:null,isFetching:!1,error:!1};default:return e}},x=s(0),m={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},f=Object(c.createContext)(m),g=function(e){var t=e.children,s=Object(c.useReducer)(h,m),n=Object(O.a)(s,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){localStorage.setItem("user",JSON.stringify(a.user))}),[a.user]),Object(x.jsx)(f.Provider,{value:{user:a.user,isFetching:a.isFetching,error:a.error,dispatch:r},children:t})},v=(s(52),function(){var e=Object(c.useContext)(f),t=e.user,s=e.dispatch;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"top",children:[Object(x.jsxs)("div",{className:"topLeft",children:[Object(x.jsxs)("div",{className:"topIcon",children:[" ",Object(x.jsx)(l.a,{})]}),Object(x.jsxs)("div",{className:"topIcon",children:[" ",Object(x.jsx)(j.a,{})]}),Object(x.jsxs)("div",{className:"topIcon",children:[" ",Object(x.jsx)(b.a,{})]})]}),Object(x.jsx)("div",{className:"topCenter",children:Object(x.jsxs)("ul",{className:"topList",children:[Object(x.jsx)("li",{className:"topListItem",children:Object(x.jsx)(p.b,{className:"link",to:"/",children:"HOME"})}),Object(x.jsx)("li",{className:"topListItem",children:Object(x.jsx)(p.b,{className:"link",to:"/write",children:"WRITE"})}),Object(x.jsx)("li",{className:"topListItem",onClick:function(){s({type:"LOGOUT"})},children:t&&"LOGOUT"})]})}),Object(x.jsx)("div",{className:"topRight",children:t?Object(x.jsx)(p.b,{to:"/?user=".concat(t.username),className:"link",children:Object(x.jsxs)("b",{className:"colortop",children:[" ","Welcome "+t.username]})}):Object(x.jsxs)("ul",{className:"topList",children:[Object(x.jsx)("li",{className:"topListItem",children:Object(x.jsx)(p.b,{className:"link",to:"/login",children:"LOGIN"})}),Object(x.jsx)("li",{className:"topListItem",children:Object(x.jsx)(p.b,{className:"link",to:"/register",children:"REGISTER"})})]})})]})})}),N=s(12),w=s(7),I=s.n(w),y=(s(57),s(58),function(){return Object(x.jsxs)("div",{className:"header",children:[Object(x.jsx)("div",{className:"headerTitles",children:Object(x.jsx)("span",{className:"headerTitlelg",children:"BLOG"})}),Object(x.jsx)("img",{className:"headerImg",src:"./images/headerImage.jpg",alt:""})]})}),S=(s(59),s(60),function(e){var t=e.post;return Object(x.jsxs)("div",{className:"post",children:[t.photo&&Object(x.jsx)("img",{className:"postImage",src:"http://localhost:9002/images/"+t.photo,alt:""}),Object(x.jsxs)("div",{className:"postInfo",children:[Object(x.jsx)(p.b,{to:"/post/".concat(t._id),className:"link",children:Object(x.jsx)("span",{className:"postTitle",children:t.title})}),Object(x.jsx)("hr",{}),Object(x.jsx)("span",{className:"postDate",children:new Date(t.createdAt).toDateString()})]}),Object(x.jsx)("p",{className:"postDesc",children:t.desc})]})}),k=function(e){var t=e.posts;return Object(x.jsx)("div",{className:"posts",children:t.map((function(e){return Object(x.jsx)(S,{post:e})}))})},T=s(11),L=s.n(T),C=s(3),E=function(){var e=Object(c.useState)([]),t=Object(O.a)(e,2),s=t[0],n=t[1],a=Object(C.e)().search;return Object(c.useEffect)((function(){var e=function(){var e=Object(N.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("/posts"+a);case 2:t=e.sent,n(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[a]),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(y,{}),Object(x.jsx)("div",{className:"home",children:Object(x.jsx)(k,{posts:s})})]})},F=(s(79),s(80),s(41)),P=s.n(F),R=s(42),U=s.n(R);function D(){var e=Object(C.e)().pathname.split("/")[2],t=Object(c.useState)({}),s=Object(O.a)(t,2),n=s[0],a=s[1],r=Object(c.useContext)(f).user,i=Object(c.useState)(""),l=Object(O.a)(i,2),o=l[0],j=l[1],u=Object(c.useState)(""),b=Object(O.a)(u,2),d=b[0],h=b[1],m=Object(c.useState)(!1),g=Object(O.a)(m,2),v=g[0],w=g[1];Object(c.useEffect)((function(){var t=function(){var t=Object(N.a)(I.a.mark((function t(){var s;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.a.get("/posts/"+e);case 2:s=t.sent,a(s.data),j(s.data.title),h(s.data.desc);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var y=function(){var t=Object(N.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.a.delete("/posts/"+e,{username:r.username});case 3:window.location.replace("/"),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),S=function(){var e=Object(N.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.put("/posts/".concat(n._id),{username:r.username,title:o,desc:d});case 3:w(!1),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:"singlePost",children:Object(x.jsxs)("div",{className:"singlePostWrapper",children:[n.photo&&Object(x.jsx)("img",{src:"http://localhost:9002/images/"+n.photo,alt:"",className:"singlePostImg"}),v?Object(x.jsx)("input",{type:"text",value:o,className:"singlePostTitleInput",autoFocus:!0,onChange:function(e){return j(e.target.value)}}):Object(x.jsxs)("h1",{className:"singlePostTitle",children:[o,n.username===(null===r||void 0===r?void 0:r.username)&&Object(x.jsxs)("span",{className:"editTitle",children:[Object(x.jsx)("span",{className:"editTitleIcon",onClick:function(){return w(!0)},children:Object(x.jsx)(P.a,{})}),Object(x.jsx)("span",{className:"editTitleIcon",onClick:y,children:Object(x.jsx)(U.a,{})})]})]}),Object(x.jsxs)("div",{className:"singlePostInfo",children:[Object(x.jsxs)("span",{className:"singlePostAuthor",children:["Author:",Object(x.jsx)(p.b,{to:"/?user=".concat(n.username),className:"link",children:Object(x.jsxs)("b",{children:[" ",n.username]})})]}),Object(x.jsx)("span",{className:"singlePostDate",children:new Date(n.createdAt).toDateString()})]}),v?Object(x.jsx)("textarea",{className:"singlePostDescInput",value:d,onChange:function(e){return h(e.target.value)}}):Object(x.jsx)("p",{className:"singlePostDesc",children:d}),v&&Object(x.jsx)("button",{className:"singlePostButton",onClick:S,children:"Update"})]})})}var G=function(){return Object(x.jsx)("div",{className:"single",children:Object(x.jsx)(D,{})})},A=(s(81),s(43)),_=s.n(A),B=function(){var e=Object(c.useState)(""),t=Object(O.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)(""),r=Object(O.a)(a,2),i=r[0],l=r[1],o=Object(c.useState)(null),j=Object(O.a)(o,2),u=j[0],b=j[1],p=Object(c.useContext)(f).user,d=function(){var e=Object(N.a)(I.a.mark((function e(t){var c,n,a,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c={username:p.username,title:s,desc:i},!u){e.next=15;break}return n=new FormData,a=Date.now()+u.name,n.append("name",a),n.append("file",u),c.photo=a,e.prev=8,e.next=11,L.a.post("/upload",n);case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(8);case 15:return e.prev=15,e.next=18,L.a.post("/posts",c);case 18:r=e.sent,window.location.replace("/post/"+r.data._id),e.next=24;break;case 22:e.prev=22,e.t1=e.catch(15);case 24:case"end":return e.stop()}}),e,null,[[8,13],[15,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"write",children:[u&&Object(x.jsx)("img",{className:"WriteImage",src:URL.createObjectURL(u),alt:""}),Object(x.jsxs)("form",{className:"writeForm",onSubmit:d,children:[Object(x.jsxs)("div",{className:"writeFormGroup",children:[Object(x.jsx)("label",{htmlFor:"fileInput",children:Object(x.jsx)("div",{className:"writeIcon",children:Object(x.jsx)(_.a,{})})}),Object(x.jsx)("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:function(e){return b(e.target.files[0])}}),Object(x.jsx)("input",{type:"text",className:"writeInput",placeholder:"Title",autoFocus:!0,onChange:function(e){return n(e.target.value)}})]}),Object(x.jsxs)("div",{className:"writeFormGroup",children:[Object(x.jsx)("textarea",{className:"writeInput writeStory",type:"text",placeholder:"Tell your story...",onChange:function(e){return l(e.target.value)}}),Object(x.jsx)("button",{className:"writeSubmit",type:"submit",children:"Publish"})]})]})]})},J=(s(82),function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),s=Object(c.useContext)(f),n=s.dispatch,a=s.isFetching,r=Object(c.useState)(!1),i=Object(O.a)(r,2),l=i[0],o=i[1],j=function(){var s=Object(N.a)(I.a.mark((function s(c){var a;return I.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return c.preventDefault(),n({type:"LOGIN_START"}),s.prev=2,s.next=5,L.a.post("/auth/login",{username:e.current.value,password:t.current.value});case 5:a=s.sent,n({type:"LOGIN_SUCCESS",payload:a.data}),s.next=13;break;case 9:s.prev=9,s.t0=s.catch(2),o(!0),n({type:"LOGIN_FAILURE"});case 13:case"end":return s.stop()}}),s,null,[[2,9]])})));return function(e){return s.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"login",children:[Object(x.jsx)("span",{className:"loginTitle",children:"Login"}),Object(x.jsxs)("form",{action:"",className:"loginForm",onSubmit:j,children:[Object(x.jsx)("label",{children:"Username"}),Object(x.jsx)("input",{type:"text",placeholder:"Enter your username....",ref:e}),Object(x.jsx)("label",{children:"Password"}),Object(x.jsx)("input",{type:"password",placeholder:"Enter your Password....",ref:t}),Object(x.jsx)("button",{className:"loginButton",type:"submit",disabled:a,children:"Login"})]}),Object(x.jsx)("button",{className:"loginRegisterButton",children:Object(x.jsx)(p.b,{className:"link",to:"/register",children:"Register"})}),l&&Object(x.jsx)("span",{style:{color:"red",margineTop:"20px"},children:"Invalid credentials!!"})]})}),W=(s(83),function(){var e=Object(c.useState)(""),t=Object(O.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)(""),r=Object(O.a)(a,2),i=r[0],l=r[1],o=Object(c.useState)(""),j=Object(O.a)(o,2),u=j[0],b=j[1],d=Object(c.useState)(!1),h=Object(O.a)(d,2),m=h[0],f=h[1],g=function(){var e=Object(N.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,L.a.post("/auth/register",{username:s,email:i,password:u});case 4:e.sent.data&&window.location.replace("/login"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),f(!0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"register",children:[Object(x.jsx)("span",{className:"registerTitle",children:"Register"}),Object(x.jsxs)("form",{action:"",className:"registerForm",onSubmit:g,children:[Object(x.jsx)("label",{children:"User Name"}),Object(x.jsx)("input",{type:"text",placeholder:"Enter your User Name..",onChange:function(e){return n(e.target.value)}}),Object(x.jsx)("label",{children:"Email"}),Object(x.jsx)("input",{type:"email",placeholder:"Enter your Email-Id..",onChange:function(e){return l(e.target.value)}}),Object(x.jsx)("label",{children:"Password"}),Object(x.jsx)("input",{type:"password",placeholder:"Enter your Password..",onChange:function(e){return b(e.target.value)}}),Object(x.jsx)("button",{className:"registerButton",type:"submit",children:"Register"})]}),Object(x.jsx)("button",{className:"registerloginButton",children:Object(x.jsx)(p.b,{className:"link",to:"/login",children:"Login"})}),m&&Object(x.jsx)("span",{style:{color:"red",margineTop:"20px"},children:"Something went wrong!!"})]})});var M=function(){var e=Object(c.useContext)(f).user;return Object(x.jsxs)(p.a,{children:[Object(x.jsx)(v,{}),Object(x.jsxs)(C.c,{children:[Object(x.jsx)(C.a,{exact:!0,path:"/",element:e?Object(x.jsx)(E,{}):Object(x.jsx)(W,{})}),Object(x.jsx)(C.a,{exact:!0,path:"/register",element:e?Object(x.jsx)(E,{}):Object(x.jsx)(W,{})}),Object(x.jsx)(C.a,{exact:!0,path:"/login",element:e?Object(x.jsx)(E,{}):Object(x.jsx)(J,{})}),Object(x.jsx)(C.a,{exact:!0,path:"/write",element:e?Object(x.jsx)(B,{}):Object(x.jsx)(W,{})}),Object(x.jsx)(C.a,{exact:!0,path:"/post/:postId",element:Object(x.jsx)(G,{})})]})]})};r.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(g,{children:Object(x.jsx)(M,{})})}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.3492c74d.chunk.js.map